
<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, target-densitydpi=medium-dpi, user-scalable=yes, viewport-fit=cover">
<meta name="format-detection" content="telephone=no"/>
<title></title>

<link type="text/css" rel="stylesheet" href="../js/jquery-ui/jquery-ui.min.css">
<link type="text/css" rel="stylesheet" href="../js/swiper/swiper-bundle.min.css" />
<link type="text/css" rel="stylesheet" href="../css/style.css" />
<script src="../js/jquery-3.7.1.min.js"></script>
<script src="../js/swiper/swiper-bundle.min.js"></script>
<script src="../js/jquery-ui/jquery-ui.min.js"></script>
<script src="../js/ui.js"></script>

</head>
<body>
<!-- wrap -->
<div class="wrap">
  <script>
     $.get("common/header.html", function(data) {
        $(data).prependTo(".wrap");
    });
  </script>

  <!-- container -->
  <div class="container">
    <main class="content">
      <div class="login-form" id="form-login">
        <div class="guide-text">
          <i class="ico"><img src="../images/common/ico-character-warning.svg" alt=""></i>
          <div class="tit">
            현재 <em>카카오 서비스  장애</em>로
            <br>간편 로그인이 
            <br>정상 작동하지 않습니다.              
          </div>
          <div class="txt">
            이용에 불편을 드려 죄송합니다.
            <br>가입 시 등록한 <em>이메일, PIN 번호</em>로 로그인해 주세요.
          </div>
        </div>
        <ul class="form">
          <li>
            <div class="input">
              <div class="inp"><input type="text" name="email" onblur="validateEmail(this)" placeholder="이메일 주소"></div>
            </div>
          </li>
          <li>
            <div class="input">
              <div class="inp"><input type="number" name="pin" maxLength="4" placeholder="PIN번호" onkeyup="onlyNumber(this);"></div>
            </div>
          </li>
        </ul>
        <div class="btn-wrap col">
          <button class="btn-type2 st1 full" data-id="active" disabled onclick="alertOpen('가입 시 등록하신 <br>이메일&PIN번호가 아닙니다.<br>다시 입력해 주세요.', ['확인'], alertCallback);">로그인</button>
        </div>
        <div class="login-menu">
          <ul>
            <li><button type="button" onclick="formHide('#form-login');formShow('#form-email');"><span>이메일 주소 찾기</span></button></li>
            <li><button type="button" onclick="formHide('#form-login');formShow('#form-pin');"><span>PIN번호 찾기</span></button></li>
          </ul>
        </div>
      </div>

      <div class="login-form" id="form-email" style="display:none;">
        <div class="guide-text">
          <i class="ico"><img src="../images/common/ico-character-question.svg" alt=""></i>
          <div class="tit">
            이메일 주소 찾기         
          </div>
          <div class="txt">가입 시 등록한 이름, 핸드폰 번호를 입력해 주세요.</div>
        </div>
        <ul class="form">
          <li>
            <div class="input">
              <div class="inp"><input type="text" name="name" placeholder="이름"></div>
            </div>
          </li>
          <li>
            <div class="input">
              <div class="inp"><input type="number" name="phone" placeholder="전화번호" onkeyup="onlyNumber(this);"></div>
            </div>
          </li>
        </ul>
        <div class="btn-wrap col">
          <button class="btn-type2 st1 full" data-id="active" disabled onclick="formHide('#form-email');formShow('#form-email2');alertOpen('가입 시 등록하신 <br>이름&전화번호가 아닙니다.<br>다시 입력해 주세요.', ['확인'], alertCallback);">이메일 주소 찾기</button>
        </div>
      </div>      

      <div class="login-form" id="form-email2" style="display:none;">
        <div class="guide-text">
          <i class="ico"><img src="../images/common/ico-character-smile.svg" alt=""></i>
          <div class="tit">
            이메일 주소 확인
          </div>
          <div class="txt">가입 시 등록하신 이메일 주소를 입력해 주세요.</div>
        </div>
        <ul class="form">
          <li>
            <div class="input">
              <div class="inp"><input type="text" name="email" onblur="validateEmail(this)" placeholder="이메일 주소"></div>
            </div>
          </li>
        </ul>
        <div class="btn-wrap col">
          <button class="btn-type2 st1 full" disabled data-id="active">이메일 주소 반영</button>
        </div>
        <div class="login-menu">
          <ul>
            <li><button type="button" onclick="formHide('#form-email2');formShow('#form-pin');alertOpen('가입 시 등록하신 <br>이메일 주소가 아닙니다.<br>다시 입력해 주세요.', ['확인'], alertCallback);""><span>PIN번호 찾기</span></button></li>
          </ul>
        </div>          
      </div>      

      <div class="login-form" id="form-pin" style="display:none;">
        <div class="guide-text">
          <i class="ico"><img src="../images/common/ico-character-question.svg" alt=""></i>
          <div class="tit">
            PIN번호 찾기
          </div>
          <div class="txt">
            가입 시 등록한 
            <br>이메일 주소로 PIN 번호를 발송 해 드립니다.
          </div>
        </div>
        <ul class="form">
          <li>
            <div class="input">
              <div class="inp"><input type="text" name="email" onblur="validateEmail(this)" placeholder="이메일 주소"></div>
            </div>
          </li>
        </ul>
        <div class="btn-wrap col">
          <button class="btn-type2 st1 full" disabled data-id="active">PIN번호 발송</button>
        </div>
        <div class="login-menu">
          <ul>
            <li><button type="button" onclick="formHide('#form-pin');formShow('#form-email');"><span>이메일 주소 찾기</span></button></li>
          </ul>
        </div>          
      </div>

    </main>
  </div>
  <!-- // container -->

  <script>
    $.get("common/footer.html", function(data) {
       $(data).appendTo(".wrap");
   });
 </script>
</div>
<!-- // wrap -->


<script>
  formCheck('#form-login', '[name=email], [name=pin]');
  formCheck('#form-email', '[name=name], [name=phone]');
  formCheck('#form-email2', '[name=email]');
  formCheck('#form-pin', '[name=email]');

  function formHide(id){
    $(id).hide();
  }
  function formShow(id){
    $(id).show();
    $(id).find('input[type=text], input[type=number], textarea').val('');
  }

  function alertCallback(val){
    alert(val);
  }   

  function onlyNumber(input){
    $(input).val($(input).val().replace(/[^-0-9]/g, ''));
  }

  function validateEmail(email) {
    const re = /^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/;
    if(re.test(email.value)){
      $(email).parents('.input').removeClass('error');
      $(email).parents('li').find('.txt-error').remove();
    }else{
      if($(email).parents('li').find('.txt-error').length > 0 ) return;
      $(email).parents('.input').addClass('error');
      $(email).parents('li').append('<div class="txt-error">이메일형식으로 입력해주세요.</div>')
    }
  }

  function formCheck(wrap, inputs){
    let formChecked = function(){
      let checked = $.map($(wrap).find(inputs), function(el){
            return el.value ? true : false
          });
      let valid = (checked.includes(false) ? false : true) && ($(wrap + ' .txt-error').length === 0);
      return valid;
    }
  
    function activeBtnCheck(checked){   
      let $btnActive = $(wrap).find('[data-id="active"]');
  
      if(checked()){
        $btnActive.removeAttr('disabled');
      }else{
        $btnActive.attr('disabled', 'disabled');
      }
    }
  
    $(wrap).find(inputs).on('keyup blur', function(){
      activeBtnCheck(formChecked) 
    });    
    $(document).on('click', wrap + ' .input .btn-del', function(){
      $(wrap).find('[data-id="active"]').attr('disabled', 'disabled');
    });    
  }
</script>


</body>
</html>